<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registro de Productos</title>
  <script>
    function validarFormulario() {
      const nombre = document.forms["registro"]["nombre"].value.trim();
      const marca = document.forms["registro"]["marca"].value;
      const modelo = document.forms["registro"]["modelo"].value.trim();
      const precio = parseFloat(document.forms["registro"]["precio"].value);
      const detalles = document.forms["registro"]["detalles"].value.trim();
      const unidades = parseInt(document.forms["registro"]["unidades"].value);
      let imagen = document.forms["registro"]["imagen"].value.trim();
      const mensaje = document.getElementById("mensaje");

      mensaje.textContent = ""; // limpia el mensaje previo

      // a) Nombre: requerido y ≤ 100 caracteres
      if (nombre === "" || nombre.length > 100) {
        mensaje.textContent = "El nombre es requerido y debe tener 100 caracteres o menos.";
        return false;
      }

       // b) Marca: requerida y debe seleccionarse
      if (marca === "") {
        mensaje.textContent = "Debes seleccionar una marca.";
        return false;
      }

      // c) Modelo: requerido, alfanumérico y ≤ 25 caracteres
      const regexModelo = /^[a-zA-Z0-9]+$/;
      if (modelo === "" || !regexModelo.test(modelo) || modelo.length > 25) {
        mensaje.textContent = "El modelo debe ser alfanumérico y tener 25 caracteres o menos.";
        return false;
      }

      // d) Precio: requerido y > 99.99
      if (isNaN(precio) || precio <= 99.99) {
        mensaje.textContent = "El precio debe ser mayor a 99.99.";
        return false;
      }

      mensaje.style.color = "green";
      mensaje.textContent = "Validación correcta. Enviando formulario...";
      return true;
    }
  </script>
</head>
<body>
  <h2>Registro de Productos</h2>

  <form name="registro"
        action="http://localhost/tecweb/practicas/p09/src/set_producto_v2.php"
        method="post"
        onsubmit="return validarFormulario()">

    <label>Nombre:</label>
    <input type="text" name="nombre" required><br><br>

    <label>Marca:</label>
    <select name="marca" required>
      <option value="">--Selecciona una marca--</option>
      <option value="ADATA">ADATA</option>
      <option value="HP">HP</option>
      <option value="Kingston">Kingston</option>
      <option value="Logitech">Logitech</option>
      <option value="Samsung">Samsung</option>
    </select><br><br>

    <label>Modelo:</label>
    <input type="text" name="modelo" required><br><br>

    <label>Precio:</label>
    <input type="number" step="0.01" name="precio" required><br><br>

    <label>Unidades:</label>
    <input type="number" name="unidades" required><br><br>

    <label>Detalles:</label><br>
    <textarea name="detalles" rows="4" cols="40"></textarea><br><br>

    <label>Imagen (URL o ruta relativa):</label>
    <input type="text" name="imagen"><br><br>

    <input type="submit" value="Registrar Producto">
  </form>

  <p id="mensaje" style="font-weight:bold; color:red;"></p>
</body>
</html>